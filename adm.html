<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
    
    <link rel="stylesheet" href="/assets/css/main-adm.css" />
    <title>Local IFPI - ADM</title>
  </head>

  <body>
    <div id="app">

      <header>

        <div class="links">
          <a class="painel" href="/pages/painel.html">Painel</a>
          <a class="sair" href="index.html">Sair</a>
        </div>

        <div class="nav">
          <div class="logo-titulo">
            <a href="index.html"
              ><img src="/assets/icons/logo-ifpi.png" alt="Logo IFPI"
            /></a>
            <h2>LocaLIFPI</h2>
          </div>

          <div class="search-container">
            <input
              type="text"
              id="buscarSala"
              name="buscarSala"
              placeholder="Buscar sala"
              autocomplete="off"
            />
            <span class="material-symbols-outlined lupa">search</span>
          </div>
        </div>

      </header>

      <main>
        
        <div class="map-container">
          <div class="container">
            <div class="elemento elemento-1"></div>
            <div class="elemento elemento-2"></div>
            <div class="elemento elemento-3"></div>
            <div class="elemento elemento-4"></div>
            <div class="elemento elemento-5"></div>
            <div class="elemento elemento-6"></div>
            <div class="elemento elemento-7"></div>
            <div class="elemento elemento-8"></div>
            <div class="elemento elemento-9"></div>
            <div class="elemento elemento-10"></div>
            <div class="elemento elemento-11"></div>
            <div class="elemento elemento-12"></div>
            <div class="elemento elemento-13"></div>
            <div class="elemento elemento-14"></div>
            <div class="elemento elemento-15"></div>
            <div class="elemento elemento-16"></div>
            <div class="elemento elemento-17"></div>
            <div class="elemento elemento-18"></div>
            <div class="elemento elemento-19"></div>
            <div class="elemento elemento-20"></div>
            <div class="elemento elemento-21"></div>
            <div class="elemento elemento-22"></div>
            <div class="elemento elemento-23"></div>
            <div class="elemento elemento-24"></div>
            <div class="elemento elemento-25"></div>
            <div class="elemento elemento-26"></div>
            <div class="elemento elemento-27"></div>
            <div class="elemento elemento-28"></div>
            <div class="elemento elemento-29"></div>
            <div class="elemento elemento-30"></div>
            <div class="elemento elemento-31"></div>
            <div class="elemento elemento-32"></div>
            <div class="elemento elemento-33"></div>
            <div class="elemento elemento-34"></div>
            <div class="elemento elemento-35"></div>
            <div class="elemento elemento-36"></div>
            <div class="elemento elemento-37"></div>
            <div class="elemento elemento-38"></div>
            <div class="elemento elemento-39"></div>
            <div class="elemento elemento-40"></div>
            <div class="elemento elemento-41"></div>
            <div class="elemento elemento-42"></div>
            <div class="elemento elemento-43"></div>
            <div class="elemento elemento-44"></div>
            <div class="elemento elemento-45"></div>
            <div class="elemento elemento-46"></div>
            <div class="elemento elemento-47"></div>
            <div class="elemento elemento-48"></div>
            <div class="elemento elemento-49"></div>
            <div class="elemento elemento-50"></div>
            <div class="elemento elemento-51"></div>
            <div class="elemento elemento-52"></div>
            <div class="elemento elemento-53"></div>
            <div class="elemento elemento-54"></div>
            <div class="elemento elemento-55"></div>
            <div class="elemento elemento-56"></div>
            <div class="elemento elemento-57"></div>
            <div class="elemento elemento-58"></div>
            <div class="elemento elemento-59"></div>
            <div class="elemento elemento-60"></div>
            <div class="elemento elemento-61"></div>
            <div class="elemento elemento-62"></div>
            <div class="elemento elemento-63"></div>
            <div class="elemento elemento-64"></div>
            <div class="elemento elemento-65"></div>
            <div class="elemento elemento-66"></div>
            <div class="elemento elemento-67"></div>
            <div class="elemento elemento-68"></div>
            <div class="elemento elemento-69"></div>
            <div class="elemento elemento-70"></div>
            <div class="elemento elemento-71"></div>
            <div class="elemento elemento-72"></div>
            <div class="elemento elemento-73"></div>
            <div class="elemento elemento-74"></div>
            <div class="elemento elemento-75"></div>
            <div class="elemento elemento-76"></div>
            <div class="elemento elemento-77"></div>
            <div class="elemento elemento-78"></div>
            <div class="elemento elemento-79"></div>
            <div class="elemento elemento-80"></div>
            <div class="elemento elemento-81"></div>
            <div class="elemento elemento-82"></div>
            <div class="elemento elemento-83"></div>
            <div class="elemento elemento-84"></div>
            <div class="elemento elemento-85"></div>
            <div class="elemento elemento-86"></div>
            <div class="elemento elemento-87"></div>
            <div class="elemento elemento-88"></div>
            <div class="elemento elemento-89"></div>
            <div class="elemento elemento-90"></div>
            <div class="elemento elemento-91"></div>
            <div class="elemento elemento-92"></div>
            <div class="elemento elemento-93"></div>
          </div>

          <div
            v-for="bloco in blocosFiltrados"
            :key="bloco.nome + '-marcadores'"
          >
            <div
              v-for="sala in bloco.salas"
              :key="sala.id"
              class="marker"
              :style="{ left: sala.x + 'px', top: sala.y + 'px', width: '18px', height: '18px' }"
              @click="mostrarSala(sala)"
              :title="sala.nome"
            ></div>
          </div>

          <div v-if="salaSelecionada" class="sala-info">
            <button @click="salaSelecionada = null">×</button>

            <h2>{{ salaSelecionada.nome }}</h2>
            <span class="material-symbols-outlined editar" @click.stop="abrirEditarSala(salaSelecionada)">edit</span>
            <p class="sala-tipo">{{ salaSelecionada.tipo }}</p>

            <img
              :src="salaSelecionada.imagem || 'https://via.placeholder.com/250x150'"
              alt="Imagem da sala"
            />

            <div class="info-section" v-if="salaSelecionada.horarios?.manha">
              <h3>MANHÃ</h3>
              <div class="info-box">{{ salaSelecionada.horarios.manha }}</div>
            </div>

            <div class="info-section" v-if="salaSelecionada.horarios?.tarde">
              <h3>TARDE</h3>
              <div class="info-box">{{ salaSelecionada.horarios.tarde }}</div>
            </div>

            <div class="info-section" v-if="salaSelecionada.horarios?.noite">
              <h3>NOITE</h3>
              <div class="info-box">{{ salaSelecionada.horarios.noite }}</div>
            </div>
          </div>
        </div>

        <div v-if="showEditPopup" class="edit-container">

              <img
                :src="salaToEdit.imagem || 'https://via.placeholder.com/250x150'"
                alt="Imagem da sala"
                class="edit-image"
              />
              <span class="material-symbols-outlined fechar" @click="fecharEditarSala">close</span>

            <div class="edit-content">

                <label>SALA</label>
                <input type="text" v-model="salaToEdit.nome" />

                <label>MANHÃ</label>
                <input type="text" v-model="salaToEdit.horarios.manha" />

                <label>TARDE</label>
                <input type="text" v-model="salaToEdit.horarios.tarde" />

                <label>NOITE</label>
                <input type="text" v-model="salaToEdit.horarios.noite" />

            </div>

            <div class="edit-buttons">
              <button @click="salvarEdicao" class="action-button save-button">
                Salvar
              </button>

                <select v-model="salaToEdit.tipo" id="tipo-select" class="tipo">
                  <option class="tipo-op" disabled value="">Tipo</option>
                  <option class="tipo-op" value="sala">Sala</option>
                  <option class="tipo-op" value="laboratorio">Laboratório</option>
                  <option class="tipo-op" value="administracao">Administração</option>
                </select>

            </div>

        </div>

      </main>

    </div>

    <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
    <script src="/script/map.vue.js"></script>
  </body>
</html>